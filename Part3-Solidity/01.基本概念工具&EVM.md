## 基本概念

#### 智能合约3大特点：
* 不可篡改
* 公开透明
* 自动执行


#### 智能合约能做什么？
* 数字货币
* NFT艺术品
* 去中心化金融（借贷、交易）
* 供应链溯源
* 投票系统
* 游戏道具

#### EVM是运行环境
* 以太坊虚拟机(EVM)作为全球共享的去中心化计算机，是智能合约得以安全、确定性运行的基础

#### Gas费用很重要
执行智能合约需要消耗Gas，理解Gas机制并优化代码以节省Gas成本是成为优秀开发者的关键

#### Remix是最佳学习工具
因其无需安装、功能完整、官方维护和适合学习的特点，成为智能合约初学者的理想选择

#### 智能合约基本结构


## EVM存储结构

### 三种存储位置的核心特性对比

| 特性 | Storage | Memory | Calldata |
|------|---------|--------|----------|
| **数据位置** | 区块链 | 内存 | 交易数据 |
| **存储时长** | 永久保存 | 函数执行期间 | 函数执行期间 |
| **可修改性** | 可读可写 | 可读可写 | 只读 |
| **Gas成本** | 最高 | 中等 | 最低 |
| **典型用途** | 状态变量 | 临时数据 | 外部参数 |
| **SLOAD成本** | 2,100+ gas | - | - |
| **SSTORE成本** | 20,000 gas (首次) | - | - |

#### 如何优化storage使用
* 批量更新：累计结果，一次性写入
* 使用局部变脸：缓存storage到memory，减少storage读取次数
* 变量打包？

#### Memory的使用场景：
* 函数参数：用于传递引用类型的函数参数，如string memory_input
* 临时变量：存储函数执行过程中的中间结果或临时数据
* 复杂计算：处理大型数据结构时的中间结果存储
* 不需永久保存：任何不需要在交易或函数调用之间持久化的数据

#### Calldata特点：
* 只读，不可修改
* 最便宜的数据存储方式
* 外部函数参数专用
* 函数执行结束后自动消失
* 
#### Calldata的使用场景：
* 外部函数的数组/字符串参数
* 不需要修改
* 追求极致 Gas 效率

### 如何选择存储位置

![存储位置](/Part3-Solidity/images/01.png)


### Gas优化最佳实践

![Gas优化](/Part3-Solidity/images/02.png)